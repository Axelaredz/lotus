function Echo(){var e=this;return e.config_relative={infinite:!1,slidesToShow:6,slidesToScroll:6,respondTo:"slider",responsive:[{breakpoint:1e3,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:500,settings:{slidesToScroll:2,slidesToShow:2}}]},e.init=function(){return $(document).ready(function(){$(".b-preloader").length>0&&$(window).load(function(){$(".b-preloader").fadeOut("slow",function(){$(this).remove()})}),$("a[href*=#]:not([href=#])").click(function(e){if($(this).data("toggle")||$(this).hasClass("open-popup"));else if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname&&location.search==this.search){var t=$(this.hash);(t=t.length?t:$("[name="+this.hash.slice(1)+"]")).length&&($("html,body").stop(!1,!1).animate({scrollTop:t.offset().top},800),e.preventDefault(),$(this).closest(".navbar-collapse.in").length>0&&$(".navbar-toggle:visible").click())}}),$(".i-mainslider .i-catalog__carousel").slick(),$(".i-photos__carousel").slick({centerMode:!0,centerPadding:"0",slidesToShow:3,responsive:[{breakpoint:768,settings:{slidesToShow:3}},{breakpoint:480,settings:{slidesToShow:1}}]}),$(".i-gallery__carousel").slick({slidesToShow:1,adaptiveHeight:!0}),$(".i-reviews__carousel").slick({slidesToShow:1,dots:!0});var e=$(".b-footer__scroll");if(e.length>0&&($(window).scroll(function(){$(this).scrollTop()>500?e.fadeIn():e.fadeOut()}),e.click(function(e){$("html, body").stop(!1,!1).animate({scrollTop:0},800),e.preventDefault()})),$(".b-menu--fixed").sticky({topSpacing:0,zIndex:14}),$(".open-popup").fancybox({type:"ajax",padding:0,margin:0,afterShow:function(){try{$(".fancybox-inner .i-slick").slick("setPosition")}catch(e){}},helpers:{title:null,overlay:{locked:!0}}}),$(".open-popup--terms").fancybox({type:"ajax",maxWidth:960}),$(".fancybox").fancybox({padding:0,helpers:{title:{type:"outside"}},beforeShow:function(){this.title&&(this.title="<strong>"+this.title+"</strong>"),$(this.element).data("description")&&(this.title+=" "+$(this.element).data("description"))},tpl:{closeBtn:'<a class="fancybox-item fancybox-close fancybox-close--image" href="javascript:;"></a>'}}),$(this).width()>768&&$(window).load(function(){$(window).stellar({horizontalScrolling:!1})}),"ontouchstart"in window&&$(".parallax").css("background-attachment","scroll"),$(document).on("click",".i-sort a,.i-pagination a,.i-category-choose a",function(e){e.preventDefault();var t=$(this).closest(".i-catalog"),o=t.find(".i-catalog__reload");o.find(".i-catalog__loading").removeClass("hidden"),$(this).closest(".i-pagination--bottom").length>0&&$("html,body").stop(!1,!1).animate({scrollTop:t.offset().top},400),$.get(this.href,function(e){o.html(e),$(window).width()>768&&setTimeout(function(){$(window).stellar("destroy"),$(window).stellar({horizontalScrolling:!1})},500)})}),$(document).on("click",".i-category-choose a",function(e){$(this).closest(".i-category-choose").find(".i-category-choose__text").html($(this).html())}),window.location.hash.length>0){var t=$(window.location.hash);t.length>0&&window.scrollTo(0,t.offset().top)}}),e},e.init()}var echo=new Echo,CommentForm=function(e){return(CommentForm=function(e){var t=this;t.$formWrapper=e.$formWrapper,t.$commentsWrapper=e.$commentsWrapper,t.$form=t.$formWrapper.find("form"),t.$guestAuth=t.$form.find(".b-guest-auth"),t.$authProviders=t.$form.find(".b-auth-providers"),t.$textarea=t.$formWrapper.find("textarea"),t.$post=t.$form.closest(".b-post"),t.selected_class="is-selected",t.authorized=e.authorized,t.auth_source=e.auth_source,t.require_auth=e.$require_auth,t.is_locked=!1,t.$activeProvider=!1,t.bindEvents()}).prototype.bindEvents=function(){var t=this;e(document).on("click",".comment-reply",function(){return t.onReply(e(this)),!1}),t.$form.on("click",".b-cancel-button",function(){return t.moveForm(t.$post,"",!1),!1}),t.$form.on("submit",function(){return t.is_locked||t.onSubmit(),!1}),t.$form.on("click",".b-guest-provider a",function(){return t.onProviderClick(e(this),!0),!1}),t.$form.on("click",".b-provider-link a",function(){return t.onProviderClick(e(this)),!1})},CommentForm.prototype.moveForm=function(t,o,n){var r=this;o=o||"",e(".b-comment").removeClass("in-reply-to"),r.refreshForm(!0),r.$form.find("input[name=parent]").val(o),r.$formWrapper.insertAfter(t),n&&r.$textarea.focus()},CommentForm.prototype.refreshForm=function(e){var t=this.$form;t.find(".errormsg").remove(),t.find(".error").removeClass("error"),t.find(".has-error").removeClass("has-error"),t.find(".wa-captcha-refresh").click(),e&&(t[0].reset(),t.find("textarea").val(""))},CommentForm.prototype.onSubmit=function(){var t=this,o=t.$form,n=o.attr("action")+"?json=1",r=o.serialize();t.is_locked=!0,e.post(n,r,function(o){if(o.status&&"ok"==o.status&&o.data)if(o.data.redirect)window.location.replace(o.data.redirect),window.location.href=o.data.redirect;else{var n,r=e(o.data.template),i=o.data.count_str,a="is-new";(n=t.$form.closest(".b-comment-wrapper")).length||(t.$commentsWrapper.removeClass("hidden"),n=t.$commentsWrapper.find(".b-comments")),n.append(e("<div class='b-comment-wrapper' />").append(r)),r.addClass(a),setTimeout(function(){r.removeClass(a)},1e4),e("html, body").animate({scrollTop:r.offset().top-100},800),t.refreshForm(!0),t.moveForm(t.$post,"",!1),e("#b-comments-count").html(i),r.trigger("plugin.comment_add")}else if(o.status&&"fail"==o.status){t.refreshForm();var s=o.errors;e(s).each(function(){var o=this;for(var n in o)if(o.hasOwnProperty(n)){var r=t.$form.find("[name="+n+"]");r.closest(".form-group").addClass("has-error"),r.after(e('<span class="text-danger errormsg"></span>').text(o[n])).addClass("error")}})}else t.refreshForm(!1);t.is_locked=!1},"json").error(function(){t.refreshForm(!1)})},CommentForm.prototype.onReply=function(t){var o=t.closest(".b-comment"),n=o.data("comment-id"),r="in-reply-to";this.moveForm(t.closest(".b-actions"),n,!0),e(".b-comment").removeClass(r),o.addClass(r)},CommentForm.prototype.onProviderClick=function(e,t){var o=this,n=o.selected_class,r=e.closest("li"),i=o.$form.find(".wa-captcha"),a=o.$guestAuth,s=o.$form.find(".b-auth-user"),l=r.data("provider");if(!r.hasClass(n)&&!t&&l){var c=(screen.width-600)/2,d=(screen.height-400)/2,h=o.require_auth?e.attr("href")+"&guest=1":e.attr("href");window.open(h,"oauth","width=600,height=400,left="+c+",top="+d+",status=no,toolbar=no,menubar=no")}t?(a.show(),i.show(),s.hide()):(a.hide(),i.hide(),s.show()),o.$activeProvider?o.$activeProvider.removeClass(n):o.$authProviders.find("."+n).removeClass(n),r.addClass(n),o.$activeProvider=r,o.$form.find("input[name=auth_provider]").val(l)},CommentForm}(jQuery),renderProfilePage=function(e){var t={hiddenClass:"hidden",changeLink:!1,deletePhotoLink:!1,getWrapper:function(){return $("#wa-my-info-wrapper")},getForm:function(){return $("#wa-my-info-edit-wrapper")},getInfoBlock:function(){return $("#wa-my-info-read-wrapper")},getPassword:function(){return this.getWrapper().find(".wa-field-password")},getPhoto:function(){return this.getWrapper().find(".wa-field-photo")}},o=function(){$("#wa-my-info-edit").on("click",function(){return i(),!1}),$("#wa-my-info-cancel").on("click",function(){return a(),!1});var e=t.changeLink;e.length&&e.on("click",function(){return l($(this)),!1});var o=t.deletePhotoLink;o.length&&o.on("click",function(){return s($(this)),!1})},n=function(){var o=t.getPhoto(),n=$('<a class="general-button" href="javascript:void(0);">'+e.deletePhotoText+"</a>"),r=o.find("img:first"),i=o.find("img:last");r[0]!=i[0]?(i.hide(),i.after(n),t.deletePhotoLink=n):i.show()},r=function(){var o=$('<a class="general-button" href="javascript:void(0);">'+e.changePasswordText+"</a>"),n=t.getPassword();n.find("p").addClass(t.hiddenClass),n.find(".wa-value").prepend(o),t.changeLink=o},i=function(){var e=t.getForm(),o=t.getInfoBlock();e.removeClass(t.hiddenClass),o.addClass(t.hiddenClass)},a=function(){var e=t.getForm(),o=t.getInfoBlock();e.addClass(t.hiddenClass),o.removeClass(t.hiddenClass)},s=function(e){var o=t.getPhoto(),n=o.find('[name="profile[photo]"]'),r=o.find("img:first");o.find("img:last").show(),r.hide(),e.hide(),n.val("")},l=function(e){e.hide(),t.getPassword().find("p").removeClass(t.hiddenClass)};$(document).ready(function(){!function(){var e=t.getPassword(),i=t.getPhoto();e.length&&r(),i.length&&n();$("#wa-my-info-edit-wrapper");o()}()})};$(function(){$("ul.auth-type-wrapper a").click(function(e){e.preventDefault();var t=(screen.width-600)/2,o=(screen.height-500)/2;window.open($(this).attr("href"),"oauth","width=600,height=500,left="+t+",top="+o+",status=no,toolbar=no,menubar=no")})}),function(){var e=echo.tooltip?echo.tooltip:echo.tooltip={};e.open=function(e,t){e.data("tooltip__init")||(e.tooltipster({trigger:"custom",maxWidth:320,trackerInterval:15,trackOrigin:!0,triggerOpen:{},triggerClose:{click:!0,scroll:!0,tap:!0}}),e.data("tooltip__init",1)),e.tooltipster("content",t).tooltipster("open")},e.close=function(e){e.data("tooltip__init")&&e.tooltipster("close")},e.close_all=function(e){if(e)e.find(".tooltipstered").tooltipster("close");else{var t=$.tooltipster.instances();$.each(t,function(e,t){t.close()})}}}();