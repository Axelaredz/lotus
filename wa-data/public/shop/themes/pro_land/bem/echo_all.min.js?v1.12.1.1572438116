function Echo(){var e=this;return e.config_relative={infinite:!1,slidesToShow:6,slidesToScroll:6,respondTo:"slider",responsive:[{breakpoint:1e3,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:500,settings:{slidesToScroll:2,slidesToShow:2}}]},e.init=function(){return $(document).ready(function(){0<$(".b-preloader").length&&$(window).load(function(){$(".b-preloader").fadeOut("slow",function(){$(this).remove()})}),$("a[href*=#]:not([href=#])").click(function(e){if($(this).data("toggle")||$(this).hasClass("open-popup"));else if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname&&location.search==this.search){var t=$(this.hash);(t=t.length?t:$("[name="+this.hash.slice(1)+"]")).length&&($("html,body").stop(!1,!1).animate({scrollTop:t.offset().top},800),e.preventDefault(),0<$(this).closest(".navbar-collapse.in").length&&$(".navbar-toggle:visible").click())}}),$(".i-mainslider .i-catalog__carousel").slick();var e=$(".i-photos__carousel"),t={centerMode:!0,centerPadding:"0",slidesToShow:3,responsive:[{breakpoint:768,settings:{slidesToShow:3}},{breakpoint:480,settings:{slidesToShow:1}}]},i=e.data("autoplay");i&&(t.autoplay=!0,t.autoplaySpeed=i),e.slick(t);var a=$(".i-gallery__carousel"),n=a.data("autoplay"),o={adaptiveHeight:!1,slidesToShow:1};n&&(o.autoplay=!0,o.autoplaySpeed=n),a.slick(o),$(".i-reviews__carousel").slick({slidesToShow:1,dots:!0});var r=$(".b-footer__scroll");if(0<r.length&&($(window).scroll(function(){500<$(this).scrollTop()?r.fadeIn():r.fadeOut()}),r.click(function(e){$("html, body").stop(!1,!1).animate({scrollTop:0},800),e.preventDefault()})),$(".b-menu--fixed").sticky({topSpacing:0,zIndex:14}),$(".open-popup").fancybox({type:"ajax",padding:0,margin:0,afterShow:function(){try{$(".fancybox-inner .i-slick").slick("setPosition")}catch(e){}},helpers:{title:null,overlay:{locked:!0}}}),$(".open-popup--terms").fancybox({type:"ajax",maxWidth:960}),$(".fancybox").fancybox({padding:0,helpers:{title:{type:"outside"}},beforeShow:function(){this.title&&(this.title="<strong>"+this.title+"</strong>"),$(this.element).data("description")&&(this.title+=" "+$(this.element).data("description"))},tpl:{closeBtn:'<a class="fancybox-item fancybox-close fancybox-close--image" href="javascript:;"></a>'}}),768<$(this).width()&&$(window).load(function(){$(window).stellar({horizontalScrolling:!1})}),"ontouchstart"in window&&$(".parallax").css("background-attachment","scroll"),$(document).on("click",".i-sort a,.i-pagination a,.i-category-choose a",function(e){e.preventDefault();var t=$(this).closest(".i-catalog"),i=t.find(".i-catalog__reload");i.find(".i-catalog__loading").removeClass("hidden"),0<$(this).closest(".i-pagination--bottom").length&&$("html,body").stop(!1,!1).animate({scrollTop:t.offset().top},400),$.get(this.href,function(e){i.html(e),768<$(window).width()&&setTimeout(function(){$(window).stellar("destroy"),$(window).stellar({horizontalScrolling:!1})},500)})}),$(document).on("click",".i-category-choose a",function(e){$(this).closest(".i-category-choose").find(".i-category-choose__text").html($(this).html())}),0<window.location.hash.length){var c=$(window.location.hash);0<c.length&&window.scrollTo(0,c.offset().top)}}),e},e.init()}var echo=new Echo;$(function(){$("ul.auth-type-wrapper a").click(function(e){e.preventDefault();var t=(screen.width-600)/2,i=(screen.height-500)/2;window.open($(this).attr("href"),"oauth","width=600,height=500,left="+t+",top="+i+",status=no,toolbar=no,menubar=no")})}),$(function(){$(".b-blog__date_tooltip").tooltip({placement:"right"})}),$(document).ready(function(){var e=$("#contact__form");if(0<e.length){var t=e.find("#contact__old_body"),i=e.find("#contact__phone"),a=e.find("#contact__body"),n=e.find("#contact__email");0<i.length&&0<t.val().length&&a.val(t.val()),0<n.length&&"empty@pisem.net"==n.val()&&n.val(""),e.on("submit",function(){e.find("*").removeAttr("style").removeClass("animated").css("transition","unset"),e.addClass("invisible"),$(".b-contact__loading").addClass("b-contact__loading--loading"),0<n.length&&""==n.val()&&n.val("empty@pisem.net"),0<i.length&&(t.val(a.val()),a.val(i.data("phone")+": "+i.val()+"\n\n"+a.val()))})}}),function(i){i.fn.downCount=function(e,r){var c=i.extend({date:null,offset:null},e);if(c.date){var t=String(c.date).split("-");c.date=new Date(t[0],t[1]-1,t[2],t[3],t[4],0)}else i.error("Date is not defined.");var s=this,d=function(){var e=new Date,t=e.getTime()+6e4*e.getTimezoneOffset();return new Date(t+36e5*c.offset)};var l=setInterval(function(){var e=c.date-d();if(e<0)return clearInterval(l),void(r&&"function"==typeof r&&r());var t=36e5,i=Math.floor(e/864e5),a=Math.floor(e%864e5/t),n=Math.floor(e%t/6e4),o=Math.floor(e%6e4/1e3);i=2<=String(i).length?i:"0"+i,a=2<=String(a).length?a:"0"+a,n=2<=String(n).length?n:"0"+n,o=2<=String(o).length?o:"0"+o,s.find(".days").text(i),s.find(".hours").text(a),s.find(".minutes").text(n),s.find(".seconds").text(o)},1e3)}}(jQuery),jQuery(document).ready(function(e){var t=e(".b-countdown");0<t.length&&t.downCount({date:t.data("date"),offset:5})}),$(document).on("click",".i-faq__switch",function(e){e.preventDefault();var t=$(this).closest(".i-faq__item"),i=t.find(".b-faq__text"),a="b-faq--is-open";t.hasClass(a)?i.stop(!1,!1).slideUp():("toggle"==t.data("view")&&$(".i-faq__item").not(t).each(function(){var e=$(this);e.hasClass(a)&&(e.removeClass(a),e.find(".b-faq__text").stop(!1,!1).slideUp())}),i.stop(!1,!1).slideDown()),t.toggleClass(a)});var renderProfilePage=function(n){var o={hiddenClass:"hidden",changeLink:!1,deletePhotoLink:!1,getWrapper:function(){return $("#wa-my-info-wrapper")},getForm:function(){return $("#wa-my-info-edit-wrapper")},getInfoBlock:function(){return $("#wa-my-info-read-wrapper")},getPassword:function(){return this.getWrapper().find(".wa-field-password")},getPhoto:function(){return this.getWrapper().find(".wa-field-photo")}},i=function(){$("#wa-my-info-edit").on("click",function(){return c(),!1}),$("#wa-my-info-cancel").on("click",function(){return s(),!1});var e=o.changeLink;e.length&&e.on("click",function(){return l($(this)),!1});var t=o.deletePhotoLink;t.length&&t.on("click",function(){return d($(this)),!1})},a=function(){var e=o.getPhoto(),t=$('<a class="general-button" href="javascript:void(0);">'+n.deletePhotoText+"</a>"),i=e.find("img:first"),a=e.find("img:last");i[0]!=a[0]?(a.hide(),a.after(t),o.deletePhotoLink=t):a.show()},r=function(){var e=$('<a class="general-button" href="javascript:void(0);">'+n.changePasswordText+"</a>"),t=o.getPassword();t.find("p").addClass(o.hiddenClass),t.find(".wa-value").prepend(e),o.changeLink=e},c=function(){var e=o.getForm(),t=o.getInfoBlock();e.removeClass(o.hiddenClass),t.addClass(o.hiddenClass)},s=function(){var e=o.getForm(),t=o.getInfoBlock();e.addClass(o.hiddenClass),t.removeClass(o.hiddenClass)},d=function(e){var t=o.getPhoto(),i=t.find('[name="profile[photo]"]'),a=t.find("img:first");t.find("img:last").show(),a.hide(),e.hide(),i.val("")},l=function(e){e.hide(),o.getPassword().find("p").removeClass(o.hiddenClass)};$(document).ready(function(){!function(){var e=o.getPassword(),t=o.getPhoto();e.length&&r(),t.length&&a();$("#wa-my-info-edit-wrapper");i()}()})};function echoShop(){var s=this;s.currency={},s.currencyFormat=function(e,t){var i,a,n=s.currency.frac_digits,o=s.currency.decimal_point,r=s.currency.thousands_sep;isNaN(n=Math.abs(n))&&(n=2),null==o&&(o=","),null==r&&(r=" "),3<(a=(i=parseInt(e=(+e||0).toFixed(n))+"").length)?a%=3:a=0,e=(a?i.substr(0,a)+r:"")+i.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+r)+(n&&e-i?o+Math.abs(e-i).toFixed(n).replace(/-/,0).slice(2):"");var c=t?s.currency.sign:s.currency.sign_html;return s.currency.sign_position?e+s.currency.sign_delim+c:c+s.currency.sign_delim+e},s.load_product=function(t){var e=t.data("url");e&&$.get(e,{selling:!0},function(e){t.html(e)})}}function subscribe__success(){$(".i-subscribe__external_success").removeClass("hidden"),$(".i-subscribe__external").remove();var e=$(".i-subscribe__show_button");e.length&&e.hasClass("hidden")&&e.removeClass("hidden").hide().slideDown()}function ThemeSlimMenu(){var n=this;n.$slim_menu=null,n.slimMenu=function(){if(n.$slim_menu&&n.$slim_menu.length){n.$icon.addClass("hidden"),n.$dropdown.find(".b-slim_menu__item").appendTo(n.$slim_menu);var t=n.$slim_menu.width()-50,e=n.$slim_menu.height();if(n.$slim_menu[0].scrollHeight>e){var i=0,a=!1;n.$slim_menu.find(".b-slim_menu__item").each(function(){var e=$(this);i+=e.outerWidth(),t<i&&(a=!0),a&&e.appendTo(n.$dropdown)}),a&&n.$icon.removeClass("hidden")}}},$(document).on("click",".i-slim_menu__bar_icon",function(e){e.preventDefault()}),$(document).ready(function(){n.$slim_menu=$(".i-slim_menu"),0<n.$slim_menu.length?(n.$dropdown=$(".i-slim_menu__dropdown"),n.$icon=$(".i-slim_menu__bar_icon"),n.slimMenu()):n.$slim_menu=null}),$(window).on("resize load",function(){n.slimMenu()}),$(document).on("cityselect__set_city",function(){n.slimMenu()})}!function(e){"use strict";var t=function(r){return(t=function(e){this.$wrapper=e.$wrapper,this.urls=e.urls,this.initClass()}).prototype.initClass=function(){var t=this;t.initUI(),t.initThemeCart(),t.$wrapper.on("click",".js-clear-cart",function(){var e=o(t.$wrapper);e?e.clear({confirm:!0}).then(function(){location.reload()}):alert("Error")})},t.prototype.initUI=function(){var o=this;function a(e){e=e||o.$wrapper,e.find('input[type="checkbox"]').each(function(){var e,t,i,a=r(this),n=a.data("is_rendered");n||(e=r(this),t=r('<span class="s-checkbox" />').insertBefore(e).prepend(e),i='<span><i class="s-icon"><svg><use xlink:href="%icon_uri%"></use></svg></i></span>'.replace("%icon_uri%",o.urls["checkbox-icon"]),t.append(i),a.data("is_rendered",!0))}),e.find("select").each(function(){var e=r(this),t=e.data("is_rendered");function i(){var i=e[0].selectedIndex,a="selected";e.find("option").each(function(e){var t=r(this);e===i?t.addClass(a):t.removeClass(a)})}t||(r('<div class="s-styled-select"><span class="s-icon"></span></div>').insertBefore(e).prepend(e),e.on("change",i),i(),e.data("is_rendered",!0))}),e.find('input[type="radio"]').each(function(){var e,t=r(this),i=t.data("is_rendered");i||(e=r(this),r('<span class="s-radio" />').insertBefore(e).prepend(e).append("<span />"),t.data("is_rendered",!0))})}a(),o.$wrapper.on("wa_order_cart_reloaded",function(){a()}).on("wa_order_form_reloaded",function(){a()}).on("wa_order_form_changed",function(){a()}),r(document).on("wa_auth_form_loaded",function(e,t){var i=r("#"+t.form_wrapper_id);i.length&&a(i)}),r(document).on("wa_order_dialog_open",function(e,t){a(t)})},t.prototype.initThemeCart=function(){var a=this,e=r("#cart"),t=((t=function(e){this.$wrapper=e.$wrapper,this.$price=e.$price,this.initClass()}).prototype.initClass=function(){},t.prototype.update=function(e){var t=this;e.formatted_price&&(t.$price.html(e.formatted_price),0<e.price?t.$wrapper.removeClass("empty"):t.$wrapper.addClass("empty"))},t),n=new t({$wrapper:e,$price:e.find(".cart-total")});a.$wrapper.on("wa_order_cart_changed",function(e,t){var i=o(a.$wrapper);n.update({price:t.cart.total,formatted_price:i.formatPrice(t.cart.total)})})},t;function o(e){var t=e.find("#js-order-cart");if(!t.length||!t.data("controller"))throw new Error("Can't find cart controller");return t.data("controller")}}(jQuery);window.ShopOrderPage=t}(jQuery),$(document).ready(function(){}),$(function(){var t=$(".i-product-desc__load_product");t.removeClass("i-product-desc__load_product");var e=t.data("url");$.get(e,{desc:!0},function(e){t.removeClass("b-catalog__loading_product"),t.html(e)})}),$(document).ready(function(){var e=$("#subscribe .wa-subscribe-form");e.length&&e.find('[name="subscriber[email]"]').attr("required","required").attr("type","email")}),$(document).on("click",".i-technics__show_all",function(e){e.preventDefault(),$(".i-technics__more_list").slideDown(),$(this).addClass("hidden"),$(".i-technics__hide").removeClass("hidden")}),$(document).on("click",".i-technics__hide",function(e){e.preventDefault(),$(".i-technics__more_list").slideUp(),$(this).addClass("hidden"),$(".i-technics__show_all").removeClass("hidden")}),function(){var e=echo.tooltip?echo.tooltip:echo.tooltip={};e.open=function(e,t){e.data("tooltip__init")||(e.tooltipster({trigger:"custom",maxWidth:320,trackerInterval:15,trackOrigin:!0,triggerOpen:{},triggerClose:{click:!0,scroll:!0,tap:!0}}),e.data("tooltip__init",1)),e.tooltipster("content",t).tooltipster("open")},e.close=function(e){e.data("tooltip__init")&&e.tooltipster("close")},e.close_all=function(e){if(e)e.find(".tooltipstered").tooltipster("close");else{var t=$.tooltipster.instances();$.each(t,function(e,t){t.close()})}}}();var theme__slim_menu=new ThemeSlimMenu;function echoCartItem(r){var c=this;return c.id=r.data("id"),c.quantity=new echoShopQuantity(r.find(".i-quantity"),r),r.on("quantity__change",function(e,t){0<t&&$.post(echo.cart.cart_path+"save/",{html:1,id:c.id,quantity:t},function(e){r.find(".i-cart__item_price").html(e.data.item_total),e.data.q&&c.quantity.set_value(e.data.q),e.data.error&&alert(e.data.error),r.trigger("cart__changes",e.data)},"json")}),r.find(".i-cart__delete").click(function(e){e.preventDefault(),$.post(echo.cart.cart_path+"delete/",{html:1,id:c.id},function(e){0==e.data.count?location.reload():(r.trigger("cart__changes",e.data),r.remove())},"json")}),r.find(".i-buy__service").on("change",function(e){var t=$(this).is(":checked"),i=$(this).val(),a=r.find(".i-buy__service_"+i+"_variants"),n=$(this),o={};a.length&&(t?a.removeAttr("disabled"):a.attr("disabled","disabled")),t?(o={html:1,parent_id:c.id,service_id:i},a.length&&(o.service_variant_id=a.val()),$.post(echo.cart.cart_path+"add/",o,function(e){n.data("id",e.data.id),r.find(".i-cart__item_price").html(e.data.item_total),r.trigger("cart__changes",e.data)},"json")):(o={html:1,id:n.data("id")},$.post(echo.cart.cart_path+"delete/",o,function(e){n.data("id",null),r.find(".i-cart__item_price").html(e.data.item_total),r.trigger("cart__changes",e.data)},"json"))}),r.find(".i-buy__service_variant").on("change",function(){var e={html:1,id:r.find(".i-buy__service_"+$(this).data("service-id")).find(".i-buy__service").data("id"),service_variant_id:$(this).val()};$.post(echo.cart.cart_path+"save/",e,function(e){r.find(".i-cart__item_price").html(e.data.item_total),r.trigger("cart__changes",e.data)},"json")}),c}!function(){var n=echo.cart?echo.cart:echo.cart={};n.lang={continue:"продолжить",to_cart:"в корзину",error:"Ошибка добавления",add_success:"Продукт добавлен в корзину",system_error:"Произошла ошибка, обновите страницу"},n.cart_path="",n.items=[],n.init_item=function(e){if(!e.data("i-cart__item")){var t=new echoCartItem(e);n.items.push(t),e.data("i-cart__item",!0)}},n.active_element=!1,n.add_to_cart=function(t){n.release_active_element("reset"),n.active_element=t.find(".i-cart__submit"),n.active_element.button("loading");var e,i,a="FORM"==t[0].tagName;t.data("popup")?(n.release_active_element("reset"),i=t.data("popup"),a||(i+="&from_cart=1"),$.fancybox.open({padding:0,href:i,type:"ajax"})):(i=a?(e=t.serialize(),t.attr("action")+"?html=1"):(e=t.data(),t.data("action")),$.post(i,e,function(e){"ok"==e.status?!a||t.data("from_cart")?window.location.reload():t.trigger("cart__added",e.data):t.trigger("cart__added_error",e.errors)},"json").fail(function(){t.trigger("cart__added_error",n.lang.system_error)}))},n.release_active_element=function(e){n.active_element&&(n.active_element.button(e),n.active_element=!1)},n.update_cart=function(e){$(".i-cart__count").html(e.count),$(".i-cart__total").html(e.total),void 0===e.discount_numeric&&(e.discount_numeric=e.discount),e.discount_numeric?($(".i-cart__discount_block").removeClass("hidden"),$(".i-cart__discount").html(e.discount)):($(".i-cart__discount_block").addClass("hidden"),$(".i-cart__discount").html("0")),e.discount_coupon?($(".i-cart__coupon_block").removeClass("hidden"),$(".i-cart__coupon_discount").html(e.discount_coupon)):($(".i-cart__coupon_block").addClass("hidden"),$(".i-cart__coupon_discount").html("0")),e.add_affiliate_bonus?$(".i-cart__affiliate_hint").removeClass("hidden").html(e.add_affiliate_bonus):$(".i-cart__affiliate_hint").addClass("hidden")},n.init=function(){$(".i-cart__item").each(function(){n.init_item($(this))});var e=$(".i-cart-selling .i-catalog__carousel");0<e.length&&e.imagesLoaded(function(){e.slick(echo.config_relative)})},n.added=function(){$(".i-cart-added .i-cart__item").each(function(){n.init_item($(this))});var e=$(".i-cart-added .i-catalog__carousel");0<e.length&&e.imagesLoaded(function(){e.slick(echo.config_relative)})},$(document).on("submit",".i-cart__add_to_cart",function(e){e.preventDefault(),n.add_to_cart($(this))}),$(document).on("click","div.i-cart__add_to_cart .i-cart__submit",function(e){e.preventDefault(),n.add_to_cart($(this).closest(".i-cart__add_to_cart"))}),$(document).on("cart__added",".i-cart__add_to_cart",function(e,t){if(n.active_element){var i=echo.cart.cart_path;i+=-1==i.indexOf("?")?"?":"&",i+="only_item="+t.item_id,$.fancybox.open({href:i,type:"ajax",padding:0,margin:0,afterShow:function(){try{$(".fancybox-inner .i-slick").slick("setPosition")}catch(e){}},helpers:{title:null,overlay:{locked:!0}}})}n.release_active_element("complete")}),$(document).on("cart__added_error",".i-cart__add_to_cart",function(e,t){n.active_element&&echo.tooltip.open(n.active_element,t),n.release_active_element("reset")}),$(document).on("cart__added",function(e,t){n.update_cart(t)}),$(document).on("cart__changes",function(e,t){n.update_cart(t)}),$(document).on("click",".i-cart__affiliate_cancel",function(e){e.preventDefault(),$(this).closest("form").append("<input type='hidden' name='use_affiliate' value='0'>").submit()}),$(document).on("click",".i-cart__continue",function(e){e.preventDefault(),$.fancybox.close()}),$(document).ready(function(){n.init()})}();var Checkout=function(a){return(Checkout=function(e){var t=this;t.$wrapper=e.$wrapper||!1,t.$contact_form=a("#s-contact-form"),t.$login_form=a(".login-form-wrapper"),t.$submit=a(".s-step-submit"),t.initCheckout()}).prototype.initCheckout=function(){this.bindEvents(),this.ChangeUserType(a("#user_type_input").val())},Checkout.prototype.bindEvents=function(){var t=this;a('.s-auth-wrapper a[data-toggle="tab"]').on("shown.bs.tab",function(e){t.ChangeUserType(a(e.target).data("user_type"))})},Checkout.prototype.ChangeUserType=function(e){a("#user_type_input").val(e);var t=a("#login-form");if(t.length){var i=t.find("input");i.attr("disabled","disabled"),1==e?(this.$submit.hide(),i.removeAttr("disabled"),t.show()):(this.$submit.show(),i.attr("disabled","disabled"),t.hide())}},Checkout}(jQuery);function echoShopProduct(d,a,l){var u=this;u.features=a,u.services=l,u.price=0,u.compare_price=0,u.disabled=!1,d.on("product__disable",function(e,t){t!=u.disabled&&(u.disabled=t,u.quantity.disable(t),t?u.$buy_button.attr("disabled","disabled"):u.$buy_button.removeAttr("disabled"))}),d.on("quantity__change",function(e,t){d.trigger("product__update_price")}),d.on("product__update_price",function(){if(!u.disabled){var t=0;d.find(".i-buy__service:checked").each(function(){var e=d.find(".i-buy__service_"+$(this).val()+"_variants");t+=parseFloat(e.length?e.find(":selected").data("price"):parseFloat($(this).data("price")))});var e=(u.price+t)*u.quantity.value,i=(u.compare_price+t)*u.quantity.value;u.$price.html(echo.shop.currencyFormat(e)),u.$compare_price.html(echo.shop.currencyFormat(i)),0<u.compare_price?u.$compare_price.removeClass("hidden"):u.$compare_price.addClass("hidden")}}),u.get_key=function(){var e="";return d.find(".i-buy__sku_feature").each(function(){e+=$(this).data("feature-id")+":"+$(this).val()+";"}),e},u.show_stock=function(e){d.find(".i-buy__sku_stock").addClass("hidden"),-1==e?d.find(".i-buy__sku_no_stock").removeClass("hidden"):d.find(".i-buy__sku_"+e+"_stock").removeClass("hidden")},u.show_image=function(e){e&&d.find(".i-product__thumb--"+e).click()},u.service_variant_html=function(e,t,i){return $('<option data-price="'+i+'" value="'+e+'"></option>').text(t+" (+"+echo.shop.currencyFormat(i,1)+")")},u.init=function(){u.$price=d.find(".i-buy__price"),u.$compare_price=d.find(".i-buy__price_compare"),u.price=parseFloat(u.$price.data("price")),u.compare_price=u.$compare_price.data("compare-price"),u.$buy_button=d.find(".i-buy__button");var e=d.find(".i-product__thumbs");0<e.length&&(e.data("list")||e.imagesLoaded(function(){e.slick({slidesToShow:3,infinite:!1,responsive:[{breakpoint:480,settings:{slidesToShow:2}}]})})),d.find(".i-product__thumb").on("click",function(e){e.preventDefault();var t=$(this);if(t.closest(".i-product__thumbs").find(".i-product__thumb").removeClass("b-product__thumb--active"),t.addClass("b-product__thumb--active"),t.data("video"))d.find(".i-product__video").removeClass("hidden"),d.find(".i-product__main_image").addClass("hidden");else{d.find(".i-product__video").addClass("hidden");var i=d.find(".i-product__main_image").removeClass("hidden");i.find(".i-image").addClass("hidden"),i.find(".i-image--"+t.data("image_id")).removeClass("hidden")}}),768<=$(window).width()?d.find(".easyzoom").easyZoom():d.find(".i-product__main_image .i-image").on("click",function(e){e.preventDefault()}),d.find(".i-buy__service").click(function(){var e=$(this),t=d.find(".i-buy__service_"+e.val()+"_variants");t.length&&(e.is(":checked")?t.removeAttr("disabled"):t.attr("disabled","disabled")),d.trigger("product__update_price")}),d.find(".i-buy__service_variant").change(function(){d.trigger("product__update_price")}),d.find(".i-buy__feature_value").on("click",function(e){e.preventDefault();var t=$(this);t.siblings(".i-buy__feature_value").removeClass("selected"),t.addClass("selected"),t.closest(".i-buy__feature_block").find(".i-buy__sku_feature").val($(this).data("value")).change()}),d.find(".i-buy__sku_feature").on("change",function(){var e=u.get_key(),t=a[e];t?(u.show_stock(t.available?t.id:-1),u.show_image(t.image_id),u.updateSkuServices(t.id),t.compare_price=t.compare_price?t.compare_price:0,u.price=t.price,u.compare_price=t.compare_price,d.trigger("product__disable",!1),d.trigger("product__update_price")):(u.show_stock(-1),u.$compare_price.addClass("hidden"),u.$price.empty(),d.trigger("product__disable",!0))}),d.find(".i-buy__sku").click(function(){var e=$(this),t=e.val(),i=parseFloat(e.data("price")),a=parseFloat(e.data("compare-price")),n=e.data("image-id");u.show_image(n),u.show_stock(t),u.updateSkuServices(t),u.price=i,u.compare_price=a,d.trigger("product__update_price")}),u.quantity=new echoShopQuantity(d.find(".i-quantity"),d);var t=d.find(".i-cross-selling .i-catalog__carousel");0<t.length&&t.imagesLoaded(function(){t.slick(echo.config_relative)});var i=d.find(".i-up-selling .i-catalog__carousel");0<i.length&&i.imagesLoaded(function(){i.slick(echo.config_relative)})},u.updateSkuServices=function(e){var t=d.find(".i-buy__sku_"+e+"_stock").data("sku-count");for(var i in t&&0<t||(t=null),u.quantity.set_max(t),l[e]){var a=l[e][i],n=d.find(".i-buy__service_"+i);if(!1===a)n.addClass("hidden").find(".i-buy__service,.i-buy__service_variant").attr("disabled","disabled").removeAttr("checked");else if(n.removeClass("hidden").find(".i-buy__service").removeAttr("disabled"),"string"==typeof a)n.find(".i-buy__service_price").html(echo.shop.currencyFormat(a)),n.find(".i-buy__service").data("price",parseFloat(a));else{var o=n.find(".i-buy__service_variant"),r=o.val();for(var c in a){var s=o.find("option[value="+c+"]");!1===a[c]?(s.hide(),s.attr("value")==r&&(r=!1)):(r||(r=c),s.replaceWith(u.service_variant_html(c,a[c][0],a[c][1])))}o.val(r)}}},u.fix_bug=function(){var e=d.find("i-buy__sku:checked:not(:disabled)");e.length||(e=d.find(".i-buy__sku:not(:disabled):first").prop("checked",!0)),e.click(),d.find(".i-buy__sku_feature:first").change()},u.init(),u.fix_bug()}function echoShopQuantity(t,i){var a=this;return a.init=function(){a.value=1,a.max=1/0,a.static=!0,t&&0!=t.length&&(a.static=!1,a.input=t.find(".i-quantity__value"),a.minus=t.find(".i-quantity__minus"),a.plus=t.find(".i-quantity__plus"),a.set_max(a.input.data("max-quantity")),a.value=parseInt(a.input.val()),isNaN(a.value)&&a.set_value(1),a.minus.click(function(e){e.preventDefault(),1<a.value?a.input.val(a.value-1).change():i.trigger("quantity__zero")}),a.plus.click(function(e){e.preventDefault(),a.value<a.max?a.input.val(a.value+1).change():(echo.tooltip.open(a.input,a.input.data("tooltip")),i.trigger("quantity__more"))}),a.input.keydown(function(e){var t=e.keyCode?e.keyCode:e.which;38==t?(e.preventDefault(),a.plus.click()):40==t?(e.preventDefault(),a.minus.click()):13==t&&e.preventDefault()}),a.input.change(function(){var e=parseInt(a.input.val());isNaN(e)?(e=a.value,a.input.val(e)):(e>a.max?e=a.max:e<1&&(e=1),a.value!=e&&(a.set_value(e),i.trigger("quantity__change",e)))}))},a.set_max=function(e){e=parseInt(e),a.max=isNaN(e)||0===e?1/0:e,a.value>a.max&&(a.set_value(a.max),i.trigger("quantity__change",a.max))},a.set_value=function(e){a.value=parseInt(e),t.find(".i-quantity__value").val(a.value)},a.disable=function(e){e?(a.input.attr("disabled","disabled"),a.minus.attr("disabled","disabled"),a.plus.attr("disabled","disabled")):(a.input.removeAttr("disabled"),a.minus.removeAttr("disabled"),a.plus.removeAttr("disabled"))},a.init(),a}$(document).ready(function(){setInterval(function(){$(".b-related .slick-initialized").each(function(){var e=$(this),t=e.data("fix-width");t?t!=e.width()&&(e.slick("unslick"),e.slick(echo.config_relative),e.data("fix-width",e.width())):e.data("fix-width",e.width())})},250)}),$(document).on("click",".i-product_features__show_all,.i-product_features__hide",function(e){e.preventDefault(),$(".i-product_features__link,.i-product_features__more_row").toggleClass("hidden")});